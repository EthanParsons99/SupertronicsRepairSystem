@model IEnumerable<SupertronicsRepairSystem.Models.Product>
@{
    Layout = "_ViewProductLayout";
    ViewData["Title"] = "All Products";
}

<link rel="stylesheet" href="~/css/AllProducts.css">

<div class="page-wrapper">
    <div class="content-wrap">
        <!-- Hero Section -->
        <div class="hero-section">
            <h1>
                YOUR TECH <span class="repair">REPAIR</span>
                <span class="bottom-line">STARTS HERE</span>
            </h1>
        </div>

        <!-- Sale Banner -->
        <div class="sale-banner">
            <h2>🔥 MASSIVE SALE! UP TO 50% OFF SELECTED ITEMS! 🔥 LIMITED TIME ONLY! 🔥 SHOP NOW!</h2>
        </div>

        <!-- Products Grid -->
        <div class="product-grid">
            @foreach (var product in Model)
            {
                <div class="product-card">
                    <a asp-controller="Customer" asp-action="CustomerViewProduct" asp-route-id="@product.Id" class="product-card-link">
                        <img src="@(!string.IsNullOrEmpty(product.ImageUrl) ? product.ImageUrl : Url.Content("~/images/"))"
                             alt="@product.Name" class="product-image" />
                        <div class="product-info">
                            <h3>@product.Name</h3>
                            <p>
                                @(string.IsNullOrEmpty(product.Description) ? "Quality product available now"
                                    : (product.Description.Length > 80 ? product.Description.Substring(0, 77) + "..." : product.Description))
                            </p>
                            <div class="price-details">
                                @if (product.DiscountPercentage > 0)
                                {
                                    <span class="discount">-@product.DiscountPercentage%</span>
                                }
                                <span class="current-price">R @String.Format("{0:N0}", product.Price)</span>
                                @if (product.WasPrice > 0 && product.WasPrice > product.Price)
                                {
                                    <span class="was-price">R @String.Format("{0:N0}", product.WasPrice)</span>
                                }
                            </div>
                        </div>
                    </a>
                    <button class="add-to-cart-btn" onclick="addToCart('@product.Id', event)">
                        <i class="bi bi-cart-plus"></i> Add to Cart
                    </button>
                    <a class="btn btn-primary"
                       asp-controller="Customer"
                       asp-action="KeepAside"
                       asp-route-serialNumber="@product.SerialNumber">
                        Keep Aside
                    </a>

                </div>
            }
        </div>
    </div>
</div>
