@{
    ViewData["Title"] = "Your cart";
    Layout = "_ViewProductLayout";
}

<div class="container mt-4">
    <h1 class="mb-4">Your cart</h1>

    <div class="row">
        <div class="col-lg-8">
            <!-- Dynamic cart list will be rendered here -->
            <div id="cart-items" class="list-group mb-3">
                <div class="text-center py-4 text-muted" id="cart-empty">Loading cart…</div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card p-3">
                <h5>Total</h5>
                <div class="d-flex justify-content-between">
                    <div>Subtotal</div>
                    <div id="cart-subtotal">R 0.00</div>
                </div>
                <div class="d-flex justify-content-between">
                    <div>Tax</div>
                    <div id="cart-tax">R 0.00</div>
                </div>
                <hr />
                <div class="d-flex justify-content-between fw-bold">
                    <div>Grand Total</div>
                    <div id="cart-grandtotal">R 0.00</div>
                </div>

                <div class="form-check mt-3">
                    <input class="form-check-input" type="checkbox" id="agreeTerms" />
                    <label class="form-check-label small" for="agreeTerms">I agree with the terms and conditions</label>
                </div>

                <button id="checkoutBtn" class="btn btn-primary w-100 mt-3" disabled>Checkout</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/cart.js" asp-append-version="true"></script>
    <script>
        // initialize cart when view loads
        document.addEventListener('DOMContentLoaded', function () {
            window.Cart && window.Cart.loadCart();
            // enable checkout button only when terms checked and cart has items
            document.getElementById('agreeTerms').addEventListener('change', function (e) {
                const enabled = e.target.checked && (window.Cart && window.Cart.currentItemCount > 0);
                document.getElementById('checkoutBtn').disabled = !enabled;
            });
        });
    </script>
}-